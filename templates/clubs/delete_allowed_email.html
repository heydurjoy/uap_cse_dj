{% extends 'base.html' %}
{% load static %}

{% block title %}Delete Allowed Email - {{ club.name }}{% endblock %}

{% block content %}
<div class="container">
    <section class="delete-email-page">
        <div class="page-header">
            <a href="{% url 'clubs:manage_allowed_emails' club.pk %}" class="back-link">‚Üê Back to Add Members</a>
            <h1>Remove Allowed Email</h1>
        </div>
        
        {% if messages %}
            <div class="messages-container">
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
        
        <!-- Confirmation Card -->
        <div class="confirmation-card">
            <div class="warning-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                    <line x1="12" y1="9" x2="12" y2="13"></line>
                    <line x1="12" y1="17" x2="12.01" y2="17"></line>
                </svg>
            </div>
            <h2>Are you sure you want to delete this allowed email?</h2>
            <div class="email-details">
                <p><strong>Email:</strong> {{ allowed_email.email }}</p>
                <p><strong>User Type:</strong> {{ allowed_email.get_user_type_display }}</p>
                <p><strong>Power User:</strong> {% if allowed_email.is_power_user %}Yes{% else %}No{% endif %}</p>
                <p><strong>Status:</strong> 
                    {% if allowed_email.is_active %}Active{% else %}Inactive{% endif %}
                    {% if allowed_email.is_blocked %} (Blocked){% endif %}
                </p>
                <p><strong>Created:</strong> {{ allowed_email.created_at|date:"M d, Y" }}</p>
            </div>
            <p class="warning-text">This will remove the email from this club's allowed list. If the member is in positions in this club, they will remain in those positions but may lose access. The member's account and membership in other clubs will not be affected.</p>
            
            <form method="post" action="{% url 'clubs:delete_allowed_email' club.pk allowed_email.pk %}" class="delete-form">
                {% csrf_token %}
                <div class="form-actions">
                    <button type="submit" class="delete-btn">Yes, Delete</button>
                    <a href="{% url 'clubs:manage_allowed_emails' club.pk %}" class="cancel-btn">Cancel</a>
                </div>
            </form>
        </div>
    </section>
</div>

<style>
.delete-email-page {
    background: var(--bg-primary);
    border-radius: 15px;
    box-shadow: 0 8px 25px var(--shadow);
    padding: 2.5rem;
    margin-bottom: 3rem;
}

.page-header {
    margin-bottom: 2rem;
    border-bottom: 2px solid var(--border-color);
    padding-bottom: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.page-header h1 {
    font-size: 2.8rem;
    color: var(--color-primary);
    margin: 0;
    text-align: center;
    flex-grow: 1;
}

.back-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--color-primary);
    text-decoration: none;
    font-weight: 600;
    transition: color 0.3s ease;
}

.back-link:hover {
    color: var(--color-primary-hover);
    text-decoration: underline;
}

.messages-container {
    margin-bottom: 1.5rem;
}

.alert {
    padding: 1rem 1.5rem;
    border-radius: 8px;
    margin-bottom: 1rem;
    font-weight: 500;
}

.alert-success {
    background-color: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.alert-error {
    background-color: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

.confirmation-card {
    background: var(--bg-secondary);
    border-radius: 12px;
    padding: 3rem;
    border: 1px solid var(--border-color);
    max-width: 600px;
    margin: 0 auto;
    text-align: center;
}

.warning-icon {
    color: #dc3545;
    margin-bottom: 1.5rem;
    display: flex;
    justify-content: center;
}

.confirmation-card h2 {
    font-size: 1.8rem;
    color: var(--text-primary);
    margin-bottom: 2rem;
    font-weight: 700;
}

.email-details {
    background: var(--bg-primary);
    border-radius: 8px;
    padding: 1.5rem;
    margin-bottom: 2rem;
    text-align: left;
    border: 1px solid var(--border-color);
}

.email-details p {
    margin: 0.75rem 0;
    color: var(--text-primary);
    font-size: 0.95rem;
}

.email-details p:first-child {
    margin-top: 0;
}

.email-details p:last-child {
    margin-bottom: 0;
}

.warning-text {
    color: #dc3545;
    font-weight: 600;
    margin-bottom: 2rem;
    font-size: 1rem;
}

.delete-form {
    margin-top: 2rem;
}

.form-actions {
    display: flex;
    gap: 1rem;
    justify-content: center;
}

.delete-btn {
    padding: 0.75rem 2rem;
    background: #dc3545;
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
}

.delete-btn:hover {
    background: #c82333;
    transform: translateY(-2px);
}

.cancel-btn {
    padding: 0.75rem 2rem;
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.cancel-btn:hover {
    background: var(--border-color);
    transform: translateY(-2px);
}

@media (max-width: 768px) {
    .delete-email-page {
        padding: 1.5rem;
    }
    
    .page-header h1 {
        font-size: 2rem;
    }
    
    .confirmation-card {
        padding: 2rem 1.5rem;
    }
    
    .confirmation-card h2 {
        font-size: 1.5rem;
    }
    
    .form-actions {
        flex-direction: column;
    }
    
    .delete-btn, .cancel-btn {
        width: 100%;
    }
}
</style>
{% endblock %}

