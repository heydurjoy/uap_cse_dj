{% extends 'base.html' %}
{% load static %}

{% block title %}Credits - UAP CSE Website{% endblock %}

{% block content %}
<div class="credits-page">
    <section class="credits-hero">
        <div class="hero-content">
            <h1 class="hero-title">
              Built with
<span class="heart-container">
  <span class="glowing-heart">‚ù§Ô∏è</span>
<audio id="popSound" src="{% static 'images/pop-331049.mp3' %}" preload="auto"></audio></span> by UAPians
            </h1>
            <div class="hero-stats">
                <div class="stat-item">
                    <span class="stat-number">0.00</span>
                    <span class="stat-label">cost</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">100%</span>
                    <span class="stat-label">passion</span>
                </div>
            </div>
        </div>
    </section>

    <section class="credits-intro">
        <div class="intro-card">
            <p class="intro-text">
                This website was born from <strong>CSE 302: Object-Oriented Programming II: Lab, instructed by Durjoy Mistry</strong>.
                Rebuilt from scratch with commitment‚Äîdriven by ownership rather than obligation.
            </p>
        </div>
    </section>

    {% if course_contributors %}
    <section class="credits-section">
        <div class="section-header">
            <h2 class="section-title">üéì Course-Based Development</h2>
            <p class="final-description-text">
                After years of teaching OOP II, I finally took a chance on the students of UAP CSE to build our website as part of their coursework. With no industry experience and new to web development, they were given real responsibilities across different modules. I never expected a production-ready system‚Äîonly honesty in effort and learning‚Äîand they delivered exactly that.
                <br><br>
                The project grew through experimentation and teamwork. While it was not ready to go live, it stands as proof of curiosity, courage, and commitment. I claim no pride in this work‚Äîonly gratitude and humility for having learned alongside these students.
                <br><br>
                ‚Äî Durjoy Mistry, Instructor of CSE 302: Object-Oriented Programming II: Lab
            </p>
        </div>
        <div class="course-grid">
            {% for contributor in course_contributors %}
            {% if "durjoy" in contributor.name|lower and "mistry" in contributor.name|lower %}
                <!-- Special flip card for Durjoy Mistry in course-based phase -->
                <div class="student-flip-container special-card">
                    <div class="student-flip-inner">
                        <div class="student-flip-front">
                            <div class="student-wrapper">
                                <div class="student-card">
                                    {% if contributor.photo %}
                                    <img src="{{ contributor.photo.url }}" alt="{{ contributor.name }}" class="student-image">
                                    {% else %}
                                    <div class="student-placeholder">üë§</div>
                                    {% endif %}
                                </div>
                                <div class="student-info">
                                    <h4 class="student-name">{{ contributor.name }}</h4>
                                    <div class="student-contributions">
                                        {% if contributor.number_of_commits %}
                                        <span class="contribution-item">
                                            <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
                                                <path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0L19.2 12l-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
                                            </svg>
                                            {{ contributor.number_of_commits }}
                                        </span>
                                        {% endif %}
                                        {% if contributor.lines_added %}
                                        <span class="contribution-item">
                                            <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
                                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                                            </svg>
                                            {{ contributor.lines_added|floatformat:0 }}
                                        </span>
                                        {% endif %}
                                        {% if contributor.lines_deleted %}
                                        <span class="contribution-item">
                                            <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
                                                <path d="M19 13H5v-2h14v2z"/>
                                            </svg>
                                            {{ contributor.lines_deleted|floatformat:0 }}
                                        </span>
                                        {% endif %}
                                    </div>
                                </div>

                                <div class="info-bubble">
                                    <button class="bubble-close">√ó</button>
                                    <h4>{{ contributor.name }}</h4>
                                    <p class="bubble-role">{{ contributor.role }}</p>
                                    {% if contributor.reflection %}
                                    <p class="bubble-reflection">"{{ contributor.reflection }}"</p>
                                        {% endif %}
                                    <div class="bubble-contributions">
                                        {% if contributor.number_of_commits %}
                                        <div class="bubble-stat">
                                            <span>Commits:</span>
                                            <strong>{{ contributor.number_of_commits }}</strong>
                                        </div>
                                        {% endif %}
                                        {% if contributor.lines_added %}
                                        <div class="bubble-stat">
                                            <span>Added:</span>
                                            <strong>{{ contributor.lines_added|floatformat:0 }}</strong>
                                    </div>
                                        {% endif %}
                                        {% if contributor.lines_deleted %}
                                        <div class="bubble-stat">
                                            <span>Deleted:</span>
                                            <strong>{{ contributor.lines_deleted|floatformat:0 }}</strong>
                                </div>
                                        {% endif %}
                                    </div>
                                    <div class="bubble-footer">
                                        {% if contributor.github_username %}
                                        <a href="https://github.com/{{ contributor.github_username }}" target="_blank" class="bubble-link">
                                            <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                                                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                                            </svg>
                                            GitHub
                                        </a>
                                        {% endif %}
                                        {% if contributor.portfolio_link %}
                                        <a href="{{ contributor.portfolio_link }}" target="_blank" class="bubble-link">
                                            <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                                                <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
                                            </svg>
                                            Portfolio
                                        </a>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <a href="{% url 'credits' %}#final-development" class="student-flip-back-link">
                            <div class="student-flip-back">
                                <div class="special-message">
                                    <div class="brain-icon">üß†</div>
                                    <p>Brain behind this project</p>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            {% else %}
                <!-- Regular student card -->
                <div class="student-wrapper">
                    <div class="student-card">
                        {% if contributor.photo %}
                        <img src="{{ contributor.photo.url }}" alt="{{ contributor.name }}" class="student-image">
                        {% else %}
                        <div class="student-placeholder">üë§</div>
                        {% endif %}
                    </div>
                    <div class="student-info">
                        <h4 class="student-name">{{ contributor.name }}</h4>
                        <div class="student-contributions">
                            {% if contributor.number_of_commits %}
                            <span class="contribution-item">
                                <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
                                    <path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0L19.2 12l-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
                                </svg>
                                {{ contributor.number_of_commits }}
                            </span>
                            {% endif %}
                            {% if contributor.lines_added %}
                            <span class="contribution-item">
                                <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
                                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                                </svg>
                                {{ contributor.lines_added|floatformat:0 }}
                            </span>
                            {% endif %}
                            {% if contributor.lines_deleted %}
                            <span class="contribution-item">
                                <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
                                    <path d="M19 13H5v-2h14v2z"/>
                                </svg>
                                {{ contributor.lines_deleted|floatformat:0 }}
                            </span>
                            {% endif %}
                        </div>
                    </div>

                    <div class="info-bubble">
                        <button class="bubble-close">√ó</button>
                        <h4>{{ contributor.name }}</h4>
                        <p class="bubble-role">{{ contributor.role }}</p>
                        {% if contributor.reflection %}
                        <p class="bubble-reflection">"{{ contributor.reflection }}"</p>
                            {% endif %}
                        <div class="bubble-contributions">
                            {% if contributor.number_of_commits %}
                            <div class="bubble-stat">
                                <span>Commits:</span>
                                <strong>{{ contributor.number_of_commits }}</strong>
                            </div>
                            {% endif %}
                            {% if contributor.lines_added %}
                            <div class="bubble-stat">
                                <span>Added:</span>
                                <strong>{{ contributor.lines_added|floatformat:0 }}</strong>
                        </div>
                            {% endif %}
                            {% if contributor.lines_deleted %}
                            <div class="bubble-stat">
                                <span>Deleted:</span>
                                <strong>{{ contributor.lines_deleted|floatformat:0 }}</strong>
                    </div>
                            {% endif %}
                        </div>
                        <div class="bubble-footer">
                            {% if contributor.github_username %}
                            <a href="https://github.com/{{ contributor.github_username }}" target="_blank" class="bubble-link">
                                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                                </svg>
                                GitHub
                            </a>
                            {% endif %}
                            {% if contributor.portfolio_link %}
                            <a href="{{ contributor.portfolio_link }}" target="_blank" class="bubble-link">
                                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                                    <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
                                </svg>
                                Portfolio
                            </a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endif %}
            {% endfor %}
        </div>
    </section>
    {% endif %}

    {% if final_contributors %}
    <section id="final-development" class="credits-section">
        <div class="section-header">
            <h2 class="section-title">üöÄ Final Development & Deployment</h2>
            <p class="section-description">
                I never wanted this to remain only an attempt. So I continued working closely with a smaller, dedicated team to rebuild the entire system from scratch‚Äîthis time with clearer structure, stronger foundations, and the intention to deploy it for real. What you see today exists because of that shared persistence and belief.
                <br><br>
                Below is the team that helped rebuild and deliver the website professionally, from the ground up.
                </p>

        </div>
        <div class="final-description-container">

        </div>
        <div class="final-grid">
            {% for contributor in final_contributors %}
            <div class="final-card">
                    {% if contributor.photo %}
                <div class="card-bg-image" style="background-image: url('{{ contributor.photo.url }}');"></div>
                {% endif %}
                <div class="card-content-wrapper">
                    <div class="final-image-wrapper">
                        {% if contributor.photo %}
                        <img src="{{ contributor.photo.url }}" alt="{{ contributor.name }}" class="final-profile-img">
                    {% else %}
                        <div class="image-placeholder">üë§</div>
                    {% endif %}
                    </div>
                    <div class="final-content">
                        <div class="card-header">
                            <h3 class="card-name">{{ contributor.name }}</h3>
                            {% if contributor.student_id %}
                            <span class="card-student-id">{{ contributor.student_id }}</span>
                            {% endif %}
                </div>
                        <p class="card-role">{{ contributor.role }}</p>
                        <div class="image-overlay-stats">
                            {% if contributor.number_of_commits %}
                            <div class="overlay-stat">
                                <span class="overlay-stat-icon">
                                    <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                                        <path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0L19.2 12l-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
                                    </svg>
                                </span>
                                <span class="overlay-stat-value">{{ contributor.number_of_commits }}</span>
                            </div>
                    {% endif %}
                            {% if contributor.lines_added %}
                            <div class="overlay-stat">
                                <span class="overlay-stat-icon">
                                    <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                                    </svg>
                                </span>
                                <span class="overlay-stat-value">{{ contributor.lines_added|floatformat:0 }}</span>
                            </div>
                            {% endif %}
                            {% if contributor.lines_deleted %}
                            <div class="overlay-stat">
                                <span class="overlay-stat-icon">
                                    <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                                        <path d="M19 13H5v-2h14v2z"/>
                                    </svg>
                                </span>
                                <span class="overlay-stat-value">{{ contributor.lines_deleted|floatformat:0 }}</span>
                            </div>
                            {% endif %}
                        </div>
                        <div class="card-links">
                        {% if contributor.github_username %}
                            <a href="https://github.com/{{ contributor.github_username }}" target="_blank" class="card-link-icon" title="GitHub">
                                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                                </svg>
                            </a>
                            {% endif %}
                            {% if contributor.portfolio_link %}
                            <a href="{{ contributor.portfolio_link }}" target="_blank" class="card-link-icon" title="Portfolio">
                                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                                    <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
                                </svg>
                            </a>
                        {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>
    {% endif %}

    <section class="acknowledgement-section">
        <div class="section-header">
            <h2 class="section-title">Acknowledgement</h2>
        </div>
        <div class="acknowledgement-container">
            <p class="acknowledgement-text">
                This website was developed during the headship of <strong>Prof. Dr. Shah Murtaza Rashid Al Masud</strong>. Throughout the development process, he remained a close observer of the initiative and provided valuable feedback and guidance, which helped shape the direction and quality of the work. His support and encouragement are sincerely acknowledged.
            </p>
        </div>
    </section>
</div>

<div id="credits-overlay" class="credits-overlay"></div>
    <audio id="cardClickSound" src="{% static 'images/card click.mp3' %}" preload="auto"></audio>
{% endblock %}


{% block extra_css %}
<style>
    :root {
        --uap-blue: #1976d2;
        --uap-dark: #1565c0;
        --glass: rgba(255, 255, 255, 0.8);
    }

    .credits-page {
        background: var(--bg-primary);
        color: var(--text-primary);
        font-family: 'Inter', system-ui, sans-serif;
        padding-bottom: 5rem;
        text-align: center;
    }

    .credits-section {
        max-width: 1400px;
        margin: 0 auto;
        padding: 2rem 3rem;
        text-align: center;
    }

    .section-header {
        text-align: center;
        margin-bottom: 3rem;
    }

    .section-title {
        font-size: clamp(1.8rem, 4vw, 2.5rem);
        font-weight: 700;
        color: var(--color-primary);
        margin-bottom: 0.5rem;
    }

    .section-description {
        font-size: 1.1rem;
        color: var(--text-secondary);
        margin: 0;
    }

    .credits-intro {
        padding: 2rem 1rem;
        text-align: center;
        max-width: 900px;
        margin: 0 auto;
    }

    .intro-card {
        max-width: 800px;
        margin: 0 auto;
        background: var(--bg-secondary);
        backdrop-filter: blur(40px) saturate(180%) brightness(1.2);
        -webkit-backdrop-filter: blur(40px) saturate(180%) brightness(1.2);
        padding: 2rem;
        border-radius: 20px;
        box-shadow:
            0 8px 32px var(--shadow),
            0 0 0 1px var(--border-color-light) inset;
        border: 1px solid var(--border-color-light);
    }

    .intro-text {
        font-size: 1.1rem;
        line-height: 1.8;
        color: var(--text-primary);
        margin: 0;
        text-align: center;
        animation: textGlow 4s ease-in-out infinite;
    }

    .intro-text strong {
        color: var(--color-primary);
        font-weight: 600;
        animation: textGlowStrong 4s ease-in-out infinite;
    }

    @keyframes textGlow {
        0%, 100% {
            text-shadow:
                0 0 10px rgba(6, 182, 212, 0.5),
                0 0 20px rgba(6, 182, 212, 0.3),
                0 0 30px rgba(6, 182, 212, 0.2);
        }
        25% {
            text-shadow:
                0 0 10px rgba(155, 126, 216, 0.5),
                0 0 20px rgba(155, 126, 216, 0.3),
                0 0 30px rgba(155, 126, 216, 0.2);
        }
        50% {
            text-shadow:
                0 0 10px rgba(122, 184, 232, 0.5),
                0 0 20px rgba(122, 184, 232, 0.3),
                0 0 30px rgba(122, 184, 232, 0.2);
        }
        75% {
            text-shadow:
                0 0 10px rgba(255, 107, 180, 0.5),
                0 0 20px rgba(255, 107, 180, 0.3),
                0 0 30px rgba(255, 107, 180, 0.2);
        }
    }

    @keyframes textGlowStrong {
        0%, 100% {
            text-shadow:
                0 0 15px rgba(6, 182, 212, 0.8),
                0 0 25px rgba(6, 182, 212, 0.6),
                0 0 35px rgba(6, 182, 212, 0.4),
                0 0 45px rgba(6, 182, 212, 0.2);
            color: #06b6d4;
        }
        25% {
            text-shadow:
                0 0 15px rgba(155, 126, 216, 0.8),
                0 0 25px rgba(155, 126, 216, 0.6),
                0 0 35px rgba(155, 126, 216, 0.4),
                0 0 45px rgba(155, 126, 216, 0.2);
            color: #9b7ed8;
        }
        50% {
            text-shadow:
                0 0 15px rgba(122, 184, 232, 0.8),
                0 0 25px rgba(122, 184, 232, 0.6),
                0 0 35px rgba(122, 184, 232, 0.4),
                0 0 45px rgba(122, 184, 232, 0.2);
            color: #7ab8e8;
        }
        75% {
            text-shadow:
                0 0 15px rgba(255, 107, 180, 0.8),
                0 0 25px rgba(255, 107, 180, 0.6),
                0 0 35px rgba(255, 107, 180, 0.4),
                0 0 45px rgba(255, 107, 180, 0.2);
            color: #ff6bb4;
        }
    }

    /* Final Description Container */
    .final-description-container {
        max-width: 900px;
        margin: 0 auto 3rem auto;
        padding: 0 1rem;
    }

    .final-description-text {
        background: var(--bg-secondary);
        backdrop-filter: blur(40px) saturate(180%) brightness(1.2);
        -webkit-backdrop-filter: blur(40px) saturate(180%) brightness(1.2);
        padding: 2rem;
        border-radius: 20px;
        box-shadow:
            0 8px 32px var(--shadow),
            0 0 0 1px var(--border-color-light) inset;
        border: 1px solid var(--border-color-light);
        font-size: 1rem;
        line-height: 1.8;
        color: var(--text-primary);
        margin: 0;
        text-align: left;
    }

    /* Acknowledgement Section */
    .acknowledgement-section {
        max-width: 1400px;
        margin: 0 auto;
        padding: 3rem 1rem;
        text-align: center;
    }

    .acknowledgement-container {
        max-width: 900px;
        margin: 0 auto;
        padding: 0 1rem;
    }

    .acknowledgement-text {
        background: var(--bg-secondary);
        backdrop-filter: blur(40px) saturate(180%) brightness(1.2);
        -webkit-backdrop-filter: blur(40px) saturate(180%) brightness(1.2);
        padding: 2rem;
        border-radius: 20px;
        box-shadow:
            0 8px 32px var(--shadow),
            0 0 0 1px var(--border-color-light) inset;
        border: 1px solid var(--border-color-light);
        font-size: 1rem;
        line-height: 1.8;
        color: var(--text-primary);
        margin: 0;
        text-align: left;
    }

    .acknowledgement-text strong {
        color: var(--color-primary);
        font-weight: 600;
    }


    /* Hero Styling */
    .credits-hero {
        align-items: center;
        justify-content: center;
        padding: 6rem 1rem;
        text-align: center;
        background: linear-gradient(to bottom, var(--bg-tertiary), var(--bg-primary));
    }

    .hero-title {
        font-size: clamp(2rem, 5vw, 3.5rem);
        margin-bottom: 2rem;
         animation: colorFade 3s ease-in-out infinite;
}

@keyframes colorFade {
    0%, 100% { color:var(--text-primary); }       /* Primary color */
    33% { color: var(--color-primary-hover); }     /* Hover color */
    66% { color: var(--text-secondary); }         /* Secondary text color */
}


.hero-content {
    display: flex;
    flex-direction: column;
    align-items: center;       /* centers text + stats */
    justify-content: center;
    gap: 2rem;
    max-width: 900px;
    margin: 0 auto;
}
   /* Heart heartbeat + glowing effect */
.glowing-heart {
    display: inline-block;
    cursor: pointer;
    animation: heartBeat 1.5s infinite, colorFade 3s ease-in-out infinite;
    text-shadow: 0 0 10px rgba(233, 30, 99, 0.4);
    position: relative;
}

/* Heart beat */
@keyframes heartBeat {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.2); }
}
/* Flicker/pop animation for main heart */
.flicker-pop {
    animation: heartPop 0.3s forwards;
}

@keyframes heartPop {
    0% { transform: scale(1); }
    50% { transform: scale(1.5); }
    100% { transform: scale(1); }
}
/* Small heart burst animation */
.particle {
    position: absolute;
    pointer-events: none;
    opacity: 1;
    transform: scale(1) rotate(0deg);
    animation: floatHeart 1s forwards;
    font-size: 1rem;
}

@keyframes floatHeart {
    0% {
        transform: scale(1) translate(0, 0) rotate(0deg);
        opacity: 1;
    }
    25% {
        transform: scale(1.2) translate(var(--x), var(--y)) rotate(45deg);
        opacity: 1;
    }
    50% {
        transform: scale(1.1) translate(calc(var(--x) * 1.5), calc(var(--y) * 1.5)) rotate(90deg);
        opacity: 0.8;
    }
    75% {
        transform: scale(0.9) translate(calc(var(--x) * 2), calc(var(--y) * 2)) rotate(135deg);
        opacity: 0.5;
    }
    100% {
        transform: scale(0) translate(calc(var(--x) * 2.5), calc(var(--y) * 2.5)) rotate(180deg);
        opacity: 0;
    }
}
/* Heart pop and vanish */
.heart-pop {
    animation: popVanish 0.5s forwards;
}

@keyframes popVanish {
    0% { transform: scale(1); opacity: 1; }
    30% { transform: scale(1.5); opacity: 0; } /* heart pops and vanishes */
    100% { transform: scale(1); opacity: 1; }  /* heart reappears */
}

    .hero-stats {
        display: flex;
        justify-content: center;
        gap: 3rem;
    }

    .stat-number {
        font-size: 2.5rem;
        font-weight: 800;
        display: block;
       animation: colorFade 3s ease-in-out infinite;
}

    .stat-label {
        animation: colorFade 3s ease-in-out infinite;
    }

    /* Grid Layouts - Compact Design */
    .final-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
        max-width: 1000px;
        margin: 0 auto;
        padding: 0 1rem;
    }

    .final-card {
        border-radius: 24px;
        padding: 0;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        background: var(--bg-secondary);
        backdrop-filter: blur(40px) saturate(180%) brightness(1.2);
        -webkit-backdrop-filter: blur(40px) saturate(180%) brightness(1.2);
        box-shadow:
            0 8px 32px var(--shadow),
            0 0 0 1px var(--border-color-light) inset;
        border: 1px solid var(--border-color-light);
    }

    .card-bg-image {
        display: none;
    }

    .card-content-wrapper {
        position: relative;
        z-index: 1;
        background: transparent;
        padding: 1.25rem 1rem 0.75rem 1rem;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .final-card:hover {
        transform: translateY(-4px);
        box-shadow:
            0 12px 40px var(--shadow-lg),
            0 0 0 1px var(--color-primary-light) inset;
        border-color: var(--border-color);
    }

    .final-card:hover .final-image-wrapper {
        border-color: var(--color-primary-light);
    }

    /* Square Image Wrapper */
    .final-image-wrapper {
        width: 100%;
        aspect-ratio: 1;
        border-radius: 24px;
        overflow: hidden;
        position: relative;
        background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-secondary));
        flex-shrink: 0;
        border: 2px solid var(--border-color-light);
    }

    .final-profile-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 24px;
    }

    .image-placeholder {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3rem;
        opacity: 0.3;
        color: var(--color-primary);
    }

    /* Image Overlay Stats */
    .image-overlay-stats {
        display: flex;
        gap: 0.5rem;
        padding: 0;
        background: transparent;
        flex-wrap: nowrap;
        justify-content: center;
        align-items: center;
    }

    .overlay-stat {
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 0.3rem;
        background: var(--color-primary-light);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        padding: 0.3rem 0.5rem;
        border-radius: 8px;
        box-shadow: 0 1px 4px var(--shadow);
        border: 1px solid var(--border-color-light);
        white-space: nowrap;
    }

    .overlay-stat-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--color-primary);
        flex-shrink: 0;
    }

    .overlay-stat-icon svg {
        width: 16px;
        height: 16px;
        fill: currentColor;
    }

    .overlay-stat-value {
        font-size: 0.9rem;
        font-weight: 700;
        color: var(--color-primary);
        line-height: 1;
    }

    /* Compact Content */
    .final-content {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        text-align: center;
    }

    .card-header {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.15rem;
    }

    .card-name {
        font-size: 1.3rem;
        font-weight: 800;
        color: var(--color-primary);
        margin: 0;
        line-height: 1.2;
        letter-spacing: -0.02em;
    }

    .card-student-id {
        font-size: 0.7rem;
        font-weight: 500;
        color: var(--text-secondary);
        letter-spacing: 0.5px;
        text-transform: uppercase;
    }

    .card-role {
        font-size: 0.8rem;
        color: var(--text-secondary);
        margin: 0;
        line-height: 1.3;
    }

    .card-links {
        display: flex;
        gap: 0.5rem;
        justify-content: center;
        margin-top: 0.25rem;
        padding-top: 0.5rem;
        border-top: 1px solid var(--border-color-light);
    }

    .card-link-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: var(--color-primary-light);
        color: var(--color-primary);
        text-decoration: none;
        transition: all 0.3s ease;
        border: 1px solid var(--border-color-light);
    }

    .card-link-icon:hover {
        background: var(--color-primary);
        color: white;
        transform: translateY(-2px) scale(1.05);
        box-shadow: 0 4px 12px var(--shadow-md);
    }

    .card-link-icon svg {
        width: 20px;
        height: 20px;
    }

    /* Student Grid */
    .course-grid {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 1.5rem;
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 1rem;
    }

    .student-wrapper {
        position: relative;
        cursor: pointer;
        display: flex;
        flex-direction: column;
        transition: transform 0.3s ease;
    }



    .student-card {
        aspect-ratio: 4/5;
        border-radius: 16px 16px 0 0;
        overflow: hidden;
        position: relative;
        box-shadow: 0 4px 12px var(--shadow);
        transition: all 0.3s ease;
        border: 2px solid transparent;
        border-bottom: none;
    }

    .student-wrapper:not(.active):hover .student-card {
        box-shadow:
            0 12px 32px var(--shadow-lg),
            0 0 0 2px var(--color-primary-light);
        border-color: var(--color-primary-light);
        transform: scale(1.02);
        border-bottom: none;
    }

    .student-wrapper:not(.active):hover .student-info {
        border-top: 2px solid var(--color-primary-light);
    }

    .student-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
    }

    .student-wrapper:not(.active):hover .student-image {
        transform: scale(1.1);
    }

    .student-info {
        padding: 0.75rem 0.5rem;
        text-align: center;
        background: var(--bg-secondary);
        border-radius: 0 0 16px 16px;
        transition: all 0.3s ease;
        margin-top: -1px;
        border-top: none;
    }

    .student-wrapper:not(.active):hover .student-info {
        background: var(--bg-tertiary);
        box-shadow: 0 -4px 12px var(--shadow);
    }

    .student-name {
        font-size: 0.95rem;
        font-weight: 700;
        color: var(--text-primary);
        margin: 0 0 0.5rem 0;
        transition: color 0.3s ease;
    }

    .student-wrapper:not(.active):hover .student-name {
        color: var(--color-primary);
    }

    .student-contributions {
        display: flex;
        gap: 0.5rem;
        justify-content: center;
        flex-wrap: wrap;
    }

    .contribution-item {
        display: inline-flex;
        align-items: center;
        gap: 0.25rem;
        font-size: 0.75rem;
        color: var(--text-secondary);
        background: var(--color-primary-light);
        padding: 0.25rem 0.5rem;
        border-radius: 6px;
        transition: all 0.3s ease;
    }

    .student-wrapper:not(.active):hover .contribution-item {
        background: var(--color-primary);
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 2px 8px var(--shadow-md);
    }

    .contribution-item svg {
        width: 14px;
        height: 14px;
        fill: var(--color-primary);
        transition: all 0.3s ease;
    }

    .student-wrapper:not(.active):hover .contribution-item svg {
        fill: white;
        transform: scale(1.1);
    }

    /* Modal / Bubble Logic */
    .info-bubble {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.7);
        width: 90%;
        max-width: 450px;
        background: var(--bg-secondary);
        backdrop-filter: blur(40px) saturate(180%) brightness(1.2);
        -webkit-backdrop-filter: blur(40px) saturate(180%) brightness(1.2);
        padding: 2rem;
        border-radius: 24px;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        box-shadow:
            0 20px 50px var(--shadow-lg),
            0 0 0 1px var(--border-color-light) inset;
        border: 1px solid var(--border-color-light);
    }

    .student-wrapper.active .info-bubble {
        opacity: 1;
        visibility: visible;
        transform: translate(-50%, -50%) scale(1);
    }

    .credits-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.4);
        z-index: 999;
        display: none;
    }

    .credits-overlay.show { display: block; }

    .bubble-close {
        position: absolute;
        top: 12px;
        right: 15px;
        font-size: 1.8rem;
        border: none;
        background: none;
        cursor: pointer;
        color: var(--text-secondary);
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: all 0.2s ease;
    }

    .bubble-close:hover {
        background: var(--color-primary-light);
        color: var(--color-primary);
    }

    .info-bubble h4 {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--color-primary);
        margin: 0 0 0.5rem 0;
    }

    .bubble-role {
        font-size: 0.9rem;
        color: var(--text-secondary);
        margin: 0 0 1rem 0;
    }

    .bubble-reflection {
        font-size: 0.95rem;
        color: var(--text-primary);
        font-style: italic;
        margin: 0 0 1.5rem 0;
        line-height: 1.6;
    }

    .bubble-contributions {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
        padding: 1rem;
        background: var(--color-primary-light);
        border-radius: 12px;
    }

    .bubble-stat {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.9rem;
    }

    .bubble-stat span {
        color: var(--text-secondary);
    }

    .bubble-stat strong {
        color: var(--color-primary);
        font-weight: 700;
    }

    .bubble-footer {
        display: flex;
        gap: 0.75rem;
        justify-content: center;
        padding-top: 1rem;
        border-top: 1px solid var(--border-color-light);
    }

    .bubble-link {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.6rem 1.2rem;
        background: var(--color-primary-light);
        color: var(--color-primary);
        text-decoration: none;
        border-radius: 12px;
        font-weight: 600;
        font-size: 0.9rem;
        transition: all 0.3s ease;
        border: 1px solid var(--border-color-light);
    }

    .bubble-link:hover {
        background: var(--color-primary);
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px var(--shadow-md);
    }

    .bubble-link svg {
        width: 20px;
        height: 20px;
        fill: currentColor;
    }

    /* Responsive Styles */
    @media (max-width: 768px) {
        .final-grid {
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.25rem;
            padding: 0 0.75rem;
        }

        .card-content-wrapper {
            padding: 1rem 0.9rem 0.65rem 0.9rem;
            gap: 0.4rem;
        }

        .final-card {
            border-radius: 20px;
        }

        .final-image-wrapper {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 20px;
        }

        .final-profile-img {
            border-radius: 20px;
        }

        .image-overlay-stats {
            gap: 0.4rem;
        }

        .overlay-stat {
            padding: 0.3rem 0.55rem;
            gap: 0.3rem;
        }

        .overlay-stat-icon svg {
            width: 14px;
            height: 14px;
        }

        .overlay-stat-value {
            font-size: 0.8rem;
        }

        .card-name {
            font-size: 1.2rem;
        }

        .card-student-id {
            font-size: 0.7rem;
        }

        .card-role {
            font-size: 0.8rem;
        }

        .card-link-icon {
            width: 36px;
            height: 36px;
        }

        .card-link-icon svg {
            width: 18px;
            height: 18px;
        }

        .course-grid {
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            padding: 0 0.75rem;
        }

        .student-card {
            border-radius: 12px 12px 0 0;
            border-bottom: none;
        }

        .student-info {
            border-radius: 0 0 12px 12px;
            margin-top: -1px;
            border-top: none;
        }

        .info-bubble {
            width: 95%;
            max-width: none;
            padding: 1.5rem;
        }

        .hero-stats {
            gap: 2rem;
        }

        .stat-number {
            font-size: 2rem;
        }

        .credits-section {
            padding: 1.5rem 0.75rem;
        }
    }

    /* Flip Card for Durjoy in Course-Based Section */
    .student-flip-container {
        perspective: 1000px;
        width: 100%;
        height: 100%;
        position: relative;
        overflow: visible;
    }

    .student-flip-inner {
        position: relative;
        width: 100%;
        height: 100%;
        transform-style: preserve-3d;
        animation: autoFlip 10s infinite;
    }

    @keyframes autoFlip {
        0% {
            transform: rotateY(0deg);
        }
        30% {
            transform: rotateY(0deg);
        }
        35% {
            transform: rotateY(180deg);
        }
        65% {
            transform: rotateY(180deg);
        }
        70% {
            transform: rotateY(360deg);
        }
        100% {
            transform: rotateY(360deg);
        }
    }

    .student-flip-front {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
        transform: rotateY(0deg);
        overflow: visible;
    }

    .student-flip-back-link {
        position: absolute;
        width: 100%;
        height: 100%;
        text-decoration: none;
        color: inherit;
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
        transform: rotateY(180deg);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
    }

    .student-flip-back {
        width: 100%;
        height: 100%;
        min-height: 100%;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px) saturate(180%);
        -webkit-backdrop-filter: blur(20px) saturate(180%);
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem;
        box-shadow: 
            0 20px 60px rgba(0, 0, 0, 0.3),
            inset 0 1px 0 rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        background-image: 
            linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%),
            linear-gradient(to bottom, rgba(255, 255, 255, 0.15) 0%, transparent 50%);
        transition: all 0.3s ease;
    }

    .student-flip-back-link:hover .student-flip-back {
        transform: scale(1.02);
        box-shadow: 
            0 25px 70px rgba(0, 0, 0, 0.4),
            inset 0 1px 0 rgba(255, 255, 255, 0.3);
        border-color: rgba(255, 255, 255, 0.5);
    }

    .student-flip-container .special-message {
        text-align: center;
        color: var(--text-primary);
        z-index: 10;
    }

    .student-flip-container .special-message p {
        font-size: 1.5rem;
        font-weight: 700;
        margin: 0;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        color: var(--text-primary);
        line-height: 1.4;
    }

    .student-flip-container .brain-icon {
        font-size: 2rem;
        margin-bottom: 0.5rem;
        display: block;
    }

    .student-flip-container.special-card {
        position: relative;
        z-index: 100;
    }

    .student-flip-container.special-card::before {
        content: '';
        position: absolute;
        top: -5px;
        left: -5px;
        right: -5px;
        bottom: -5px;
        background: linear-gradient(45deg, var(--color-primary), #764ba2, var(--color-primary));
        border-radius: 20px;
        z-index: -1;
        opacity: 0.6;
        animation: glow 3s ease-in-out infinite;
        filter: blur(10px);
    }

    @keyframes glow {
        0%, 100% {
            opacity: 0.4;
            transform: scale(1);
        }
        50% {
            opacity: 0.8;
            transform: scale(1.02);
        }
    }

    .student-flip-container .student-wrapper {
        width: 100%;
        height: 100%;
        margin: 0;
    }

    .student-flip-container .student-card {
        width: 100%;
        height: 100%;
        border-radius: 16px 16px 0 0;
        border-bottom: none;
    }

    .student-flip-container .student-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .student-flip-container .student-info {
        margin-top: -1px;
        border-top: none;
    }

    .student-flip-container .info-bubble {
        position: fixed;
        z-index: 10000;
    }

    @media (max-width: 480px) {
        .final-grid {
            grid-template-columns: 1fr;
            gap: 1rem;
        }

        .card-content-wrapper {
            padding: 1rem 0.8rem 0.6rem 0.8rem;
            gap: 0.4rem;
        }

        .final-card {
            border-radius: 20px;
        }

        .final-image-wrapper {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 20px;
        }

        .final-profile-img {
            border-radius: 20px;
        }

        .image-overlay-stats {
            gap: 0.35rem;
        }

        .overlay-stat {
            padding: 0.25rem 0.5rem;
            gap: 0.25rem;
        }

        .overlay-stat-icon svg {
            width: 12px;
            height: 12px;
        }

        .overlay-stat-value {
            font-size: 0.75rem;
        }

        .card-name {
            font-size: 1.1rem;
        }

        .card-student-id {
            font-size: 0.65rem;
        }

        .card-role {
            font-size: 0.75rem;
        }

        .card-link-icon {
            width: 32px;
            height: 32px;
        }

        .card-link-icon svg {
            width: 16px;
            height: 16px;
        }

        .course-grid {
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
        }

        .student-card {
            border-radius: 12px 12px 0 0;
            border-bottom: none;
        }

        .student-info {
            padding: 0.6rem 0.4rem;
            border-radius: 0 0 12px 12px;
            margin-top: -1px;
            border-top: none;
        }

        .student-name {
            font-size: 0.85rem;
        }

        .contribution-item {
            font-size: 0.7rem;
            padding: 0.2rem 0.4rem;
        }

        .info-bubble {
            padding: 1.5rem;
            max-width: 90%;
        }
    }

</style>
{% endblock %}


{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', () => {
    const wrappers = document.querySelectorAll('.student-wrapper');
    const overlay = document.getElementById('credits-overlay');

    wrappers.forEach(wrapper => {
        const bubble = wrapper.querySelector('.info-bubble');
        const closeBtn = wrapper.querySelector('.bubble-close');

        wrapper.addEventListener('click', (e) => {
            // Prevent triggering on clicking the bubble itself
            if (e.target.closest('.info-bubble')) return;

            const isActive = wrapper.classList.contains('active');

            // Close all wrappers
            wrappers.forEach(w => w.classList.remove('active'));

            if (!isActive) {
                wrapper.classList.add('active');
                overlay.classList.add('show');
            } else {
                overlay.classList.remove('show');
            }
        });

        // Close button inside bubble
        closeBtn.addEventListener('click', (e) => {
            e.stopPropagation(); // Prevent triggering wrapper click
            wrapper.classList.remove('active');
            overlay.classList.remove('show');
        });
    });

    // Click outside to close
    overlay.addEventListener('click', () => {
        wrappers.forEach(w => w.classList.remove('active'));
        overlay.classList.remove('show');
    });
});


//heart
const heart = document.querySelector('.glowing-heart');
const sound = document.getElementById('popSound');

heart.addEventListener('click', () => {
    // Play sound
    if (sound) {
        sound.currentTime = 0;
        sound.play().catch(() => {});
    }

    // Main heart pop animation
    heart.classList.add('heart-pop');
    setTimeout(() => heart.classList.remove('heart-pop'), 500);

    // Create a burst of hearts
    for (let i = 0; i < 10; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.textContent = '‚ù§Ô∏è';
        const angle = Math.random() * 2 * Math.PI;
        const distance = Math.random() * 50 + 20;
        const x = Math.cos(angle) * distance;
        const y = -Math.abs(Math.sin(angle) * distance);
        particle.style.setProperty('--x', `${x}px`);
        particle.style.setProperty('--y', `${y}px`);
        particle.style.left = '50%';
        particle.style.top = '50%';
        particle.style.transform = 'translate(-50%, -50%)';
        particle.style.fontSize = `${Math.random() * 1.2 + 0.8}rem`;
        particle.style.color = `hsl(${Math.random()*360}, 80%, 60%)`;
        heart.appendChild(particle);
        setTimeout(() => particle.remove(), 1200);
    }
});


//CARDS CLICK
document.addEventListener('DOMContentLoaded', () => {
    const cardClickSound = document.getElementById('cardClickSound');

    document.querySelectorAll('.student-wrapper').forEach(wrapper => {
        const bubble = wrapper.querySelector('.info-bubble');
        const closeBtn = wrapper.querySelector('.bubble-close');

        wrapper.addEventListener('click', e => {
            // Prevent click inside bubble from toggling again
            if (e.target.closest('.info-bubble')) return;

            // Play sound
            if (cardClickSound) {
                cardClickSound.currentTime = 0;
                cardClickSound.play();
            }

            // Close all other bubbles
            document.querySelectorAll('.student-wrapper').forEach(el => el.classList.remove('active'));

            // Open this bubble
            wrapper.classList.add('active');
        });

        // Close button
        if (closeBtn) {
            closeBtn.addEventListener('click', e => {
                e.stopPropagation(); // Prevent wrapper click
                wrapper.classList.remove('active');
            });
        }
    });
});
</script>
{% endblock %}
